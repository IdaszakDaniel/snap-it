{"version":3,"sources":["../src/index.ts"],"names":["yargs","command","snapshot","argv","fileName","path","join","process","cwd","name","testNameRegex","testName","match","program","ts","createProgram","checker","getTypeChecker","source","getSourceFile","forEachChild","node","isInterfaceDeclaration","text","console","log","symbol","getSymbolAtLocation","data","members","forEach","loc","info","push"],"mappings":";;AAAA;;AACA;;AACA;;AAEA;;AACA;;;;;;;;AAEAA,eACGC,OADH,CACW,UADX,EACuB,iCADvB,EAC0D,EAD1D,EAC8DC,QAD9D,EAEGC,IAFH;;AAIA,eAAeD,QAAf,CAAwBC,IAAxB,EAAoD;AAClD,QAAMC,QAAQ,GAAGC,cAAKC,IAAL,CAAUC,OAAO,CAACC,GAAR,EAAV,EAAyBL,IAAI,CAACM,IAA9B,CAAjB;;AACA,QAAMC,aAAa,GAAG,eAAtB;AACA,QAAMC,QAAQ,GAAGP,QAAQ,CAACQ,KAAT,CAAeF,aAAf,EAA8B,CAA9B,CAAjB;AAEA,QAAMG,OAAO,GAAGC,EAAE,CAACC,aAAH,CAAiB,CAACX,QAAD,CAAjB,EAA6B,EAA7B,CAAhB;AACA,QAAMY,OAAO,GAAGH,OAAO,CAACI,cAAR,EAAhB;AACA,QAAMC,MAAM,GAAGL,OAAO,CAACM,aAAR,CAAsBf,QAAtB,CAAf;;AAEA,MAAIc,MAAJ,EAAY;AACVJ,IAAAA,EAAE,CAACM,YAAH,CAAgBF,MAAhB,EAAyBG,IAAD,IAAU;AAChC,UAAIP,EAAE,CAACQ,sBAAH,CAA0BD,IAA1B,CAAJ,EAAoC;AAClC,cAAMZ,IAAI,GAAGY,IAAI,CAACZ,IAAL,CAAUc,IAAvB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYhB,IAAZ,EAFkC,CAGlC;;AACA,cAAMiB,MAAM,GAAGV,OAAO,CAACW,mBAAR,CAA4BN,IAAI,CAACZ,IAAjC,CAAf;AACA,cAAMmB,IAAI,GAAG,EAAb;AACAF,QAAAA,MAAM,CAACG,OAAP,CAAeC,OAAf,CAAwBC,GAAD,IAAS;AAC9B,gBAAMC,IAAI,GAAG,sCAAgBD,GAAhB,EAAqBf,OAArB,CAAb;AACAQ,UAAAA,OAAO,CAACC,GAAR,CAAYO,IAAZ;AACAJ,UAAAA,IAAI,CAACK,IAAL,CAAUD,IAAV;AACD,SAJD;AAKA,gDAAiBJ,IAAjB,EAAuBjB,QAAvB;AACD;AACF,KAdD;AAeD;AACF","sourcesContent":["import path from 'path';\nimport * as ts from 'typescript'\nimport yargs from 'yargs';\n\nimport { serializeSymbol, TestPropsInfo } from './serializeSymbol';\nimport { generateTestFile } from './generateTestFile';\n\nyargs\n  .command('g <name>', 'create a snapshot for component', {}, snapshot)\n  .argv;\n\nasync function snapshot(argv: yargs.Arguments<any>) {\n  const fileName = path.join(process.cwd(), argv.name);\n  const testNameRegex = /[^\\/]+(?=\\.)/g\n  const testName = fileName.match(testNameRegex)[0]\n\n  const program = ts.createProgram([fileName], {})\n  const checker = program.getTypeChecker()\n  const source = program.getSourceFile(fileName)\n\n  if (source) {\n    ts.forEachChild(source, (node) => {\n      if (ts.isInterfaceDeclaration(node)){\n        const name = node.name.text\n        console.log(name)\n        // @ts-ignore\n        const symbol = checker.getSymbolAtLocation(node.name)\n        const data = [] as TestPropsInfo[]\n        symbol.members.forEach((loc) => {\n          const info = serializeSymbol(loc, checker)\n          console.log(info)\n          data.push(info)\n        })\n        generateTestFile(data, testName)\n      }\n    });\n  }\n}\n"],"file":"index.js"}